import{t as w,c as $,m as V,r as v,o as x,a as S,w as m,b as _,u as d,n as j,g as E,d as P,e as U,f as B,h as F,i as c,j as O,k as H,l as q,p as G,q as Q,s as k,v as M,x as z,y as D,B as K,I as T,F as J,T as L,S as W}from"./vendor.17cd23eb.js";import X from"https://esm.sh/copy-to-clipboard";import Y from"https://cdn.jsdelivr.net/npm/codemirror/src/codemirror.js";const Z=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}};Z();var ee="/assets/github.78818959.svg",te="/assets/logo.c9f36a96.svg";const ae=["innerHTML"],ne={props:{content:String,loading:Boolean},setup(p){const i=p,{content:r,loading:t}=w(i),e=$(()=>V(r.value));return(o,u)=>{const h=v("a-spin");return x(),S(h,{spinning:d(t)},{default:m(()=>[_("div",j(E(o.$attrs)),[_("div",{innerHTML:d(e)},null,8,ae)],16)]),_:1},8,["spinning"])}}};var C=(p,i)=>{for(const[r,t]of i)p[r]=t;return p};const oe={props:{content:{type:String},readonly:{type:Boolean,default:()=>!1},loading:Boolean},emits:["update:content"],setup(p,{emit:i}){const r=p,{content:t,readonly:e,loading:o}=w(r);let u;const h=P(null);U(t,()=>{b(t.value)}),B(()=>{u=Y.fromTextArea(h.value,{lineNumbers:!0,readonly:!!e}),typeof t.value=="string"&&b(t.value),u.on("change",(y,a)=>{i("update:content",u.doc.getValue())})});function b(y){u.doc.setValue(y)}return(y,a)=>{const n=v("a-spin");return x(),S(n,{spinning:d(o)},{default:m(()=>[_("div",F({class:"my-editor"},y.$attrs),[_("textarea",{ref:(s,l)=>{l.input=s,h.value=s}},null,512)],16)]),_:1},8,["spinning"])}}};var I=C(oe,[["__scopeId","data-v-2b9b4b44"]]);const se={props:{content:String,loading:Boolean},setup(p){const i=p,{content:r,loading:t}=w(i);return(e,o)=>{const u=v("a-tab-pane"),h=v("a-tabs");return x(),S(h,{class:"render"},{default:m(()=>[c(u,{key:"1",tab:"Result"},{default:m(()=>[c(ne,{content:d(r),loading:d(t),class:"markdown",style:{"padding-left":"30px"}},null,8,["content","loading"])]),_:1}),c(u,{key:"2",tab:"Source"},{default:m(()=>[c(I,{content:d(r),loading:d(t),readonly:!0},null,8,["content","loading"])]),_:1})]),_:1})}}};const A=p=>(G("data-v-0dcbe658"),p=p(),Q(),p),re={style:{position:"relative"}},le=A(()=>_("a",{href:"https://github.com/release-lab",target:"_blank",style:{position:"fixed",right:"0",top:"0"}},[_("img",{src:ee,style:{width:"60px",height:"60px"}})],-1)),ie={class:"toolbar"},ce=A(()=>_("img",{style:{"max-width":"100%","max-height":"100%"},src:te},null,-1)),pe=M(" Generate "),ue=M(" Share "),de={class:"container"},me={class:"left"},_e={style:{display:"flex",height:"100%","padding-left":"10px"}},he={class:"right"},fe={setup(p){const i=P(!1),r=P(""),t=O({repo:"https://github.com/release-lab/whatchanged.git",branch:"master",version:"HEAD~"}),e=w(t);function o(a){U(()=>t[a],n=>{u(a,n)})}function u(a,n){const s=new URL(window.location.href);s.searchParams.has(a)?s.searchParams.set(a,n):s.searchParams.append(a,n),window.history.pushState(null,null,s)}o("branch"),o("repo"),o("version");const h=P("");function b(){const a=encodeURIComponent(r.value);i.value=!0;const n=Math.random()+"";k.info({key:n,message:"Generating",description:"This may take a few minutes..."});const s=new URL("https://whatchanged.herokuapp.com");s.searchParams.append("repo",t.repo||""),s.searchParams.append("branch",t.branch||""),s.searchParams.append("version",t.version||""),s.searchParams.append("template",a||""),fetch(s).then(l=>l.text()).then(l=>{k.close(n),h.value=l}).catch(l=>{k.close(n),k.error({message:"Error",description:l.message})}).finally(()=>{i.value=!1})}function y(){const a=new URL(window.location.href);a.searchParams.append("tpl",r.value),X(a.href),z.info("URL have been copy to clipboard.")}return B(()=>{const a=new URL(window.location.href);let n=0;if(a.searchParams.has("username")&&(t.username=a.searchParams.get("username"),n++),a.searchParams.has("repo")&&(t.repo=a.searchParams.get("repo"),n++),a.searchParams.has("branch")&&(t.repo=a.searchParams.get("branch"),n++),a.searchParams.has("version")&&(t.version=a.searchParams.get("version")),a.searchParams.has("tpl"))n++,r.value=a.searchParams.get("tpl");else{const s=new URL("https://whatchanged.herokuapp.com");s.pathname="/template",fetch(s).then(l=>l.text()).then(l=>{console.log(l),r.value=l})}n===3&&t.username&&t.repo&&b()}),(a,n)=>{const s=v("a-input"),l=v("a-form-item"),R=v("a-button"),N=v("a-form");return x(),H("div",re,[le,_("div",ie,[ce,c(N,{layout:"inline",model:d(e),onSubmit:q(b,["prevent"])},{default:m(()=>[c(l,{label:"Repository",style:{width:"600px"}},{default:m(()=>[c(s,{value:d(e).repo.value,"onUpdate:value":n[0]||(n[0]=g=>d(e).repo.value=g)},null,8,["value"])]),_:1}),c(l,{label:"Branch"},{default:m(()=>[c(s,{value:d(e).branch.value,"onUpdate:value":n[1]||(n[1]=g=>d(e).branch.value=g)},null,8,["value"])]),_:1}),c(l,{label:"Version"},{default:m(()=>[c(s,{value:d(e).version.value,"onUpdate:value":n[2]||(n[2]=g=>d(e).version.value=g)},null,8,["value"])]),_:1}),c(l,null,{default:m(()=>[c(R,{type:"primary","html-type":"submit",loading:i.value},{default:m(()=>[pe]),_:1},8,["loading"]),c(R,{type:"default",onClick:y,style:{"margin-left":"20px"}},{default:m(()=>[ue]),_:1})]),_:1})]),_:1},8,["model","onSubmit"])]),_("div",de,[_("div",me,[_("div",_e,[c(I,{class:"my-editor2",content:r.value,readonly:!0,"onUpdate:content":n[3]||(n[3]=g=>r.value=g)},null,8,["content"])])]),_("div",he,[c(se,{content:h.value,loading:i.value},null,8,["content","loading"])])])])}}};var ve=C(fe,[["__scopeId","data-v-0dcbe658"]]);const f=D(ve);f.use(K);f.use(T);f.use(T.TextArea);f.use(J);f.use(L);f.use(L.TabPane);f.use(L.TabContent);f.use(W);f.mount("#app");
